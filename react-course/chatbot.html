<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot</title>
  </head>
  <style>
    .send-button {
      background-color: rgb(25,135,84);
      color: white;
      padding: 12px 20px ;
      border: none;
      margin-left: 10px ;
      border-radius: 10px;
      font-size: 15px;
      cursor: pointer;
    }
    
    .chat-input{
      padding: 12px 15px;
      border-radius: 10px;
      border-width: 1px;
      font-size: 15px;
      flex-grow: 1;
    }

    .chat-input-contianer{
      display:flex

    }
  </style>
  <body>
    <div class="js-container"></div>
    
    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/chatbot.js"></script>
    <script src="https://unpkg.com/supersimpledev/babel.js"></script>

    <script type="text/babel">
      function ChatInput({ chatMessages, setChatMessage }) {
        const [inputText, setInputText] = React.useState('');

        function saveInputText(event) {
          setInputText(event.target.value);
        }

        function sendMessage() {
          if (inputText.trim() === '') return; // Prevent empty messages    

          const newChatMessages = [
            ...chatMessages,
            { message: inputText, sender: 'user', id: crypto.randomUUID() }
          ]
          setChatMessage(newChatMessages);
  setInputText(''); // Clear input after sending
          const response = Chatbot.getResponse(inputText)
         setChatMessage([
            ...newChatMessages,
            { message: response, sender: 'robot', id: crypto.randomUUID() }
          ]);
        
        }

        return (
          <div className='chat-input-container'> 
         
            <input
              placeholder="Send message to Chatbot"
              size="30"
              value={inputText}
              onChange={saveInputText}
              className='chat-input'
            />
            <button className='send-button' onClick={sendMessage}>Send</button>
          </div>
        );
      }

      function ChatMessage({ message, sender }) {
        return (
          <div>
            {sender === 'robot' && <img src="robot.png" width="50" />}
            {message}
            {sender === 'user' && <img src="user.png" width="50" />}
          </div>
        );
      }

      function ChatMessages({ chatMessages }) {
        return (
          <>
            {chatMessages.map((chatMessage) => (
              <ChatMessage
                key={chatMessage.id}
                message={chatMessage.message}
                sender={chatMessage.sender}
              />
            ))}
          </>
        );
      }

      function App() {
        const [chatMessages, setChatMessage] = React.useState([
          { message: 'hello chatbot', sender: 'user', id: 'id1' },
          { message: 'Hello! How can I help you?', sender: 'robot', id: 'id2' },
          { message: 'Can you get me todayâ€™s date?', sender: 'user', id: 'id3' },
          { message: 'Today is September 27', sender: 'robot', id: 'id4' }
        ]);

        return (
          <>
            <ChatMessages chatMessages={chatMessages} />
            <ChatInput
              chatMessages={chatMessages}
              setChatMessage={setChatMessage}
            />
          </>
        );
      }

      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<App />);
    </script>
  </body>
</html>
